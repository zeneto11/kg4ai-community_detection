2025-09-18 13:24:54,153 - INFO - 
====================================================================================================
                             Initializing Community Detection Pipeline                              
====================================================================================================
2025-09-18 13:25:16,043 - INFO - NQ (Natural Questions) from Google graph
2025-09-18 13:25:16,043 - INFO - Description: Graph constructed from wiki articles citation data in the Natural Questions dataset
2025-09-18 13:25:16,043 - INFO - 
====================================================================================================
                                           Graph Analysis                                           
====================================================================================================
2025-09-18 13:26:17,735 - INFO - --> Citation network analysis completed
2025-09-18 13:26:17,746 - INFO - --> JSON metrics saved to community_detection/output/run5/run5_metrics.json
2025-09-18 13:26:17,747 - INFO - --> Enhanced Markdown report saved to community_detection/output/run5/run5_report.md
2025-09-18 13:26:17,747 - INFO - ===================================================================
2025-09-18 13:26:17,747 - INFO -                        Graph Analysis Summary                      
2025-09-18 13:26:17,747 - INFO - -------------------------------------------------------------------
2025-09-18 13:26:17,747 - INFO - This analysis examined a **large directed graph** with:
2025-09-18 13:26:17,747 - INFO -  - 108,071 nodes (entities) and 5,122,983 connections
2025-09-18 13:26:17,747 - INFO -  - 107,536 nodes remaining after isolation removal (535 isolated nodes removed)
2025-09-18 13:26:17,747 - INFO -  - Sparse connectivity (density: 0.0%)
2025-09-18 13:26:17,747 - INFO -  - Low clustering (0.0% - how tightly grouped entities are)
2025-09-18 13:26:17,747 - INFO -  - Average connections per entity: 95.3
2025-09-18 13:26:17,747 - INFO - **Key Insights:**
2025-09-18 13:26:17,747 - INFO -  - The network has 0 disconnected clusters, with the largest containing 0 entities
2025-09-18 13:26:17,747 - INFO -  - Low connectivity suggests potential for network growth
2025-09-18 13:26:17,747 - INFO - 
====================================================================================================
                                        Community Detection                                         
====================================================================================================
2025-09-18 13:30:01,623 - INFO - Infomap found 1262 communities in 3m 43s
2025-09-18 13:30:01,626 - INFO - -------------------------------------------------------------------
2025-09-18 13:30:13,925 - INFO - Converted to undirected weighted graph:
2025-09-18 13:30:13,926 - INFO -    Weight distribution: {1: 3621599, 2: 750692}
2025-09-18 13:32:36,489 - INFO - Louvain found 27 communities in 2m 34s
2025-09-18 13:32:36,489 - INFO - -------------------------------------------------------------------
2025-09-18 13:32:55,573 - INFO - Converted to undirected weighted graph:
2025-09-18 13:32:55,573 - INFO -    Weight distribution: {1: 3621599, 2: 750692}
2025-09-18 13:34:48,008 - INFO - Leiden found 18 communities in 2m 11s
2025-09-18 13:34:48,008 - INFO - -------------------------------------------------------------------
2025-09-18 13:34:48,008 - INFO - Starting optimized K-means community detection
2025-09-18 13:34:58,877 - INFO - Loading sentence transformer model: all-MiniLM-L6-v2
2025-09-18 13:35:00,701 - INFO - Use pytorch device_name: cuda:0
2025-09-18 13:35:00,701 - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-18 13:35:05,077 - INFO - Generating embeddings for 107536 nodes with batch size 2048
2025-09-18 13:39:06,263 - INFO - Generated embeddings shape: (107536, 384)
2025-09-18 13:39:06,264 - INFO - Applying PCA to reduce from 384 to 50 dimensions
2025-09-18 13:39:06,496 - INFO - PCA explained variance ratio: 0.458
2025-09-18 13:39:06,497 - INFO - Reducing dimensions with UMAP to 15 components
2025-09-18 13:39:06,497 - INFO - Very large dataset detected, using low-dimensional approximation
2025-09-18 13:41:17,415 - INFO - Reduced embeddings shape: (107536, 15)
2025-09-18 13:41:18,533 - INFO - Evaluating k values in parallel: [30, 40, 50, 60, 70]
2025-09-18 13:41:18,534 - INFO - Sampling 10000 points from 107536 for evaluation
2025-09-18 13:41:18,540 - INFO - Sampling 10000 points from 107536 for evaluation
2025-09-18 13:41:18,545 - INFO - Sampling 10000 points from 107536 for evaluation
2025-09-18 13:41:18,545 - INFO - Sampling 10000 points from 107536 for evaluation
2025-09-18 13:41:19,585 - INFO - Sampling 10000 points from 107536 for evaluation
2025-09-18 13:41:21,849 - INFO - K=30: Silhouette=0.364, CH=1691.3, DB=1.173
2025-09-18 13:41:21,849 - INFO - K=40: Silhouette=0.348, CH=1559.4, DB=1.143
2025-09-18 13:41:21,851 - INFO - K=50: Silhouette=0.343, CH=1447.4, DB=1.233
2025-09-18 13:41:21,856 - INFO - K=60: Silhouette=0.319, CH=1364.8, DB=1.135
2025-09-18 13:41:21,858 - INFO - K=70: Silhouette=0.324, CH=1266.1, DB=1.167
2025-09-18 13:41:21,863 - INFO - Selected optimal k: 30 (votes: 2)
2025-09-18 13:41:21,864 - INFO - Running final K-means clustering with k=30
2025-09-18 13:41:21,865 - INFO - Sampling 10000 points from 107536 for evaluation
2025-09-18 13:41:22,212 - INFO - K-means clustering completed: 30 communities found
2025-09-18 13:41:22,213 - INFO - Final metrics - Silhouette: 0.364, CH: 1691.3, DB: 1.173
2025-09-18 13:41:22,215 - INFO - K-means found 30 communities in 6m 34s
2025-09-18 13:41:22,215 - INFO - -------------------------------------------------------------------
2025-09-18 13:41:22,215 - INFO - 
====================================================================================================
                                        Community Evaluation                                        
====================================================================================================
