2025-09-18 14:45:29,459 - INFO - 
====================================================================================================
                             Initializing Community Detection Pipeline                              
====================================================================================================
2025-09-18 14:45:50,512 - INFO - NQ (Natural Questions) from Google graph
2025-09-18 14:45:50,512 - INFO - Description: Graph constructed from wiki articles citation data in the Natural Questions dataset
2025-09-18 14:45:50,512 - INFO - 
====================================================================================================
                                           Graph Analysis                                           
====================================================================================================
2025-09-18 14:46:50,647 - INFO - --> Citation network analysis completed
2025-09-18 14:46:50,652 - INFO - --> JSON metrics saved to community_detection/output/run6/run6_metrics.json
2025-09-18 14:46:50,653 - INFO - --> Enhanced Markdown report saved to community_detection/output/run6/run6_report.md
2025-09-18 14:46:50,653 - INFO - ===================================================================
2025-09-18 14:46:50,653 - INFO -                        Graph Analysis Summary                      
2025-09-18 14:46:50,653 - INFO - -------------------------------------------------------------------
2025-09-18 14:46:50,653 - INFO - This analysis examined a **large directed graph** with:
2025-09-18 14:46:50,653 - INFO -  - 108,071 nodes (entities) and 5,122,983 connections
2025-09-18 14:46:50,653 - INFO -  - 107,536 nodes remaining after isolation removal (535 isolated nodes removed)
2025-09-18 14:46:50,653 - INFO -  - Sparse connectivity (density: 0.0%)
2025-09-18 14:46:50,653 - INFO -  - Low clustering (0.0% - how tightly grouped entities are)
2025-09-18 14:46:50,653 - INFO -  - Average connections per entity: 95.3
2025-09-18 14:46:50,653 - INFO - **Key Insights:**
2025-09-18 14:46:50,653 - INFO -  - The network has 0 disconnected clusters, with the largest containing 0 entities
2025-09-18 14:46:50,653 - INFO -  - Low connectivity suggests potential for network growth
2025-09-18 14:46:50,653 - INFO - 
====================================================================================================
                                        Community Detection                                         
====================================================================================================
2025-09-18 14:50:11,432 - INFO - Infomap found 1262 communities in 3m 20s
2025-09-18 14:50:11,434 - INFO - -------------------------------------------------------------------
2025-09-18 14:50:24,109 - INFO - Converted to undirected weighted graph:
2025-09-18 14:50:24,112 - INFO -    Weight distribution: {1: 3621599, 2: 750692}
2025-09-18 14:52:37,227 - INFO - Louvain found 27 communities in 2m 25s
2025-09-18 14:52:37,229 - INFO - -------------------------------------------------------------------
2025-09-18 14:52:53,040 - INFO - Converted to undirected weighted graph:
2025-09-18 14:52:53,041 - INFO -    Weight distribution: {1: 3621599, 2: 750692}
2025-09-18 14:54:29,935 - INFO - Leiden found 18 communities in 1m 52s
2025-09-18 14:54:29,935 - INFO - -------------------------------------------------------------------
2025-09-18 14:54:29,935 - INFO - Starting optimized K-means community detection
2025-09-18 14:54:38,316 - INFO - Loading sentence transformer model: all-MiniLM-L6-v2
2025-09-18 14:54:40,059 - INFO - Use pytorch device_name: cuda:0
2025-09-18 14:54:40,059 - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-18 14:54:43,811 - INFO - Generating embeddings for 107536 nodes with batch size 2048
2025-09-18 14:58:25,138 - INFO - Generated embeddings shape: (107536, 384)
2025-09-18 14:58:25,139 - INFO - Applying PCA to reduce from 384 to 50 dimensions
2025-09-18 14:58:25,611 - INFO - PCA explained variance ratio: 0.458
2025-09-18 14:58:25,611 - INFO - Reducing dimensions with UMAP to 15 components
2025-09-18 14:58:25,611 - INFO - Very large dataset detected, using low-dimensional approximation
2025-09-18 15:00:28,892 - INFO - Reduced embeddings shape: (107536, 15)
2025-09-18 15:00:29,964 - INFO - Evaluating k values in parallel: [30, 40, 50, 60, 70]
2025-09-18 15:00:29,965 - INFO - Sampling 10000 points from 107536 for evaluation
2025-09-18 15:00:29,966 - INFO - Sampling 10000 points from 107536 for evaluation
2025-09-18 15:00:29,966 - INFO - Sampling 10000 points from 107536 for evaluation
2025-09-18 15:00:29,968 - INFO - Sampling 10000 points from 107536 for evaluation
2025-09-18 15:00:30,828 - INFO - Sampling 10000 points from 107536 for evaluation
2025-09-18 15:00:32,937 - INFO - K=30: Silhouette=0.366, CH=1656.5, DB=1.182
2025-09-18 15:00:32,938 - INFO - K=40: Silhouette=0.355, CH=1539.5, DB=1.126
2025-09-18 15:00:32,939 - INFO - K=50: Silhouette=0.319, CH=1441.4, DB=1.156
2025-09-18 15:00:32,942 - INFO - K=60: Silhouette=0.314, CH=1409.2, DB=1.138
2025-09-18 15:00:32,945 - INFO - K=70: Silhouette=0.324, CH=1266.1, DB=1.167
2025-09-18 15:00:32,945 - INFO - Selected optimal k: 30 (votes: 2)
2025-09-18 15:00:32,946 - INFO - Running final K-means clustering with k=30
2025-09-18 15:00:32,947 - INFO - Sampling 10000 points from 107536 for evaluation
2025-09-18 15:00:33,288 - INFO - K-means clustering completed: 30 communities found
2025-09-18 15:00:33,289 - INFO - Final metrics - Silhouette: 0.364, CH: 1691.3, DB: 1.173
2025-09-18 15:00:33,291 - INFO - K-means found 30 communities in 6m 3s
2025-09-18 15:00:33,291 - INFO - -------------------------------------------------------------------
2025-09-18 15:00:33,291 - INFO - 
====================================================================================================
                                        Community Evaluation                                        
====================================================================================================
2025-09-18 15:00:49,607 - INFO - --> Community results saved to community_detection/output/run6/run6_community_results.json
2025-09-18 15:00:49,623 - INFO - --> Community comparison CSV saved to community_detection/output/run6/run6_comparison.csv
2025-09-18 15:00:52,838 - INFO - --> Community size histograms generated:
2025-09-18 15:00:52,838 - INFO -    â€¢ Infomap: community_detection/output/run6/graphics/infomap_community_size_barplot.png
2025-09-18 15:00:52,838 - INFO -    â€¢ Louvain: community_detection/output/run6/graphics/louvain_community_size_barplot.png
2025-09-18 15:00:52,838 - INFO -    â€¢ Leiden: community_detection/output/run6/graphics/leiden_community_size_barplot.png
2025-09-18 15:00:52,838 - INFO -    â€¢ Kmeans: community_detection/output/run6/graphics/kmeans_community_size_barplot.png
2025-09-18 15:00:52,839 - INFO - ðŸ“Š COMMUNITY DETECTION COMPARISON
2025-09-18 15:00:52,839 - INFO - ===================================================================
2025-09-18 15:00:52,839 - INFO - Method       Communities  Modularity   Homophily   
2025-09-18 15:00:52,839 - INFO - -------------------------------------------------------------------
2025-09-18 15:00:52,839 - INFO - Infomap      1262         0.5024       0.5311      
2025-09-18 15:00:52,839 - INFO - Louvain      27           0.5980       0.7182      
2025-09-18 15:00:52,839 - INFO - Leiden       18           0.6016       0.7209      
2025-09-18 15:00:52,839 - INFO - K-means      30           0.2523       0.2950      
2025-09-18 15:00:52,839 - INFO - ===================================================================
2025-09-18 15:00:52,839 - INFO - 
====================================================================================================
                                      Community Visualization                                       
====================================================================================================
